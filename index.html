<!DOCTYPE html>
<html lang="en">
<head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Dongle&family=Jua&display=swap" rel="stylesheet">
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HPMA Gastronomy Calculator</title>
<style>
  body {
    background-image: url('cozyfire.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    height: 100vh;
    margin: 0;
    background-color: #fce5cd;
    font-family: 'Tahoma', sans-serif;
    max-width: 600px;
    margin: 2rem auto;
    padding: 0 1rem;
    color: #783f04;
  }
  .glow-text {
  color: #fff8e1;
  text-shadow: 0 0 5px #b45f06, 0 0 10px #b45f06, 0 0 15px #b45f06;
  }
  .credit {
    position: absolute;
    top: 2px;
    right: 10px;
    font-size: 1rem;
    color: #fff8e1;
    padding: 5px 10px;
    border-radius: 8px;
    font-family: 'Dongle', sans-serif;
  }

  .tabs {
    display: flex;
    justify-content: flex-start;
    margin-bottom: 0;
    width: 340px;
    margin: 0 auto;
  }

  .tab {
    padding: 0.3rem 0.4rem;
    cursor: pointer;
    background-color: #b45f06;
    color: #fff8e1; 
    border-bottom: none;
    border-radius: 6px 6px 0 0;
    font-family: 'Tahoma', sans-serif;
    font-size: 1rem;
    margin-right: 2px;
    transition: background-color 0.3s;
  }

  .tab.active {
    background-color: rgba(252, 229, 205, 0.7);
    color: #783f04; 
    font-weight: bold;
  }
  .tab:not(.active):hover {
    background-color: #783f04;
  }

  .calculator-box {
    background-color: rgba(252, 229, 205, 0.7);
    border-radius: 0px 16px 16px 16px;
    padding: 20px;
    width: 300px;
    margin: 0 auto 50px;
    box-shadow:
    0 0 5px #cc7820,
    0 0 10px #cc7820,
    0 0 15px #cc7820,
    0 0 20px #cc7820;
    text-align: center;
  }

  label {
    display: block;
    margin: 1rem 0 0.5rem;
  }

  select, input {
    width: 80%;
    padding: 0.4rem;
    font-size: 1rem;
    margin-bottom: 0.5rem;
    border-radius: 8px;
    background-color: #fff8e1;
    box-shadow: inset 2px 2px 4px rgba(0,0,0,0.1);
  }

  #progress {
    margin-right: 0.5rem;
  }

  button {
    margin-top: 1rem;
    padding: 0.6rem;
    font-size: 1rem;
    width: 50%;
    cursor: pointer;
    background-color: #b45f06;
    color: #fff8e1; 
    border: none;
    border-radius: 10px;
    font-family: 'Tahoma', sans-serif;
    transition: background-color 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  }

  button:hover {
    background-color: #783f04;
  }

  #result, #timeResult {
    margin-top: 1.5rem;
    font-weight: bold;
    white-space: pre-wrap;
  }
</style>
</head>
<body>
<div class="credit">Created by Fyrverkeri</div>
<h1 class="glow-text" style="text-align:center;">HPMA Gastronomy Calculator</h1>
<div class="tabs">
  <div class="tab active" onclick="switchTab('expTab')">EXP</div>
  <div class="tab" onclick="switchTab('timeTab')">Time</div>
</div>
<div id="expTab" class="calculator-box">
  <label for="currentLevel">Current Level</label>
  <select id="currentLevel"></select>

  <label for="targetLevel">Target Level</label>
  <select id="targetLevel"></select>

  <label for="progress">Progress into Current Level (EXP)</label>
  <input type="number" id="progress" min="0" value="0" />

  <label for="talentLevel">Faster Than Flame Talent Level</label>
  <select id="talentLevel">
    <option value="0">0 (None)</option>
    <option value="1">1 (5% faster, unlocks at Kitchen Hand I)</option>
    <option value="2">2 (10% faster, unlocks at Apprentice cook I)</option>
    <option value="3">3 (15% faster, unlocks at Sous Chef I)</option>
    <option value="4">4 (20% faster, unlocks at Head Chef I)</option>
    <option value="5">5 (25% faster), unlocks at Culinary Virtuoso I)</option>
  </select>

  <label for="delegatoLevel">The Delegator Talent Level</label>
  <select id="delegatoLevel">
    <option value="0">0 (1 station)</option>
    <option value="1">1 (2 stations, unlocks at Sous Chef I)</option>
    <option value="2">2 (3 stations, unlocks at Head Chef I)</option>
  </select>

  <button onclick="runCalculation()">Calculate</button>
  <div id="result"></div>
</div>

<div id="timeTab" class="calculator-box" style="display:none">
  <label for="recipeSelect">Select Recipe</label>
  <select id="recipeSelect">
    <option value="0">Gilded Shore Risotto (8 hr, 4 EXP)</option>
    <option value="1">Farmstead Feast Roast (6 hr, 3 EXP)</option>
    <option value="2">Woodland Mushroom Risotto (4 hr, 2 EXP)</option>
  </select>

  <label for="dishAmount">Target Number</label>
  <input type="number" id="dishAmount" min="1" value="1" />

  <label for="timeTalentLevel">Faster Than Flame Talent Level</label>
  <select id="timeTalentLevel">
    <option value="0">0 (None)</option>
    <option value="1">1 (5%)</option>
    <option value="2">2 (10%)</option>
    <option value="3">3 (15%)</option>
    <option value="4">4 (20%)</option>
    <option value="5">5 (25%)</option>
  </select>

  <label for="timeDelegatoLevel">The Delegator Talent Level</label>
  <select id="timeDelegatoLevel">
    <option value="0">0 (1 station)</option>
    <option value="1">1 (2 stations)</option>
    <option value="2">2 (3 stations)</option>
  </select>

  <button onclick="calculateTime()">Calculate</button>
  <div id="timeResult"></div>
</div>
<script>
function switchTab(tabId) {
  document.getElementById('expTab').style.display = tabId === 'expTab' ? 'block' : 'none';
  document.getElementById('timeTab').style.display = tabId === 'timeTab' ? 'block' : 'none';
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
}

const levels = ["Kitchen Hand I", "Kitchen Hand II", "Kitchen Hand III", "Apprentice Cook I", "Apprentice Cook II", "Apprentice Cook III", "Sous Chef I", "Sous Chef II", "Sous Chef III", "Head Chef I", "Head Chef II", "Head Chef III", "Culinary Virtuoso I", "Culinary Virtuoso II", "Culinary Virtuoso III", "Master of Flavour I", "Master of Flavour II", "Master of Flavour III", "MAX"];
const expPerLevel = {"Kitchen Hand I": 0, "Kitchen Hand II": 10, "Kitchen Hand III": 20, "Apprentice Cook I": 40, "Apprentice Cook II": 80, "Apprentice Cook III": 120, "Sous Chef I": 160, "Sous Chef II": 240, "Sous Chef III": 280, "Head Chef I": 320, "Head Chef II": 400, "Head Chef III": 500, "Culinary Virtuoso I": 600, "Culinary Virtuoso II": 700, "Culinary Virtuoso III": 800, "Master of Flavour I": 900, "Master of Flavour II": 1000, "Master of Flavour III": 1200, "MAX": 1400};
const dishes = [ { name: "Gilded Shore Risotto", cookTimeHr: 8, exp: 4 }, { name: "Farmstead Feast Roast", cookTimeHr: 6, exp: 3 }, { name: "Woodland Mushroom Risotto", cookTimeHr: 4, exp: 2 } ];
const talentTimeReduction = { 0: 0, 1: 0.05, 2: 0.10, 3: 0.15, 4: 0.20, 5: 0.25 };

function populateSelect(id, options) {
  const select = document.getElementById(id);
  options.forEach(opt => {
    const option = document.createElement('option');
    option.value = opt;
    option.textContent = opt;
    select.appendChild(option);
  });
}

populateSelect('currentLevel', levels);
populateSelect('targetLevel', levels);

function runCalculation() {
  const currentIndex = levels.indexOf(document.getElementById('currentLevel').value);
  const targetIndex = levels.indexOf(document.getElementById('targetLevel').value);
  let progress = parseFloat(document.getElementById('progress').value) || 0;
  const talentLevel = parseInt(document.getElementById('talentLevel').value);
  const delegatoLevel = parseInt(document.getElementById('delegatoLevel').value);
  const resultDiv = document.getElementById('result');

  if (currentIndex === -1 || targetIndex === -1 || targetIndex <= currentIndex) {
    resultDiv.textContent = 'Please select valid levels.';
    return;
  }

  let totalExpNeeded = 0;
  for (let i = currentIndex + 1; i <= targetIndex; i++) {
    totalExpNeeded += expPerLevel[levels[i]];
  }
  totalExpNeeded -= progress;
  if (totalExpNeeded < 0) totalExpNeeded = 0;

  const [dish1, dish2, dish3] = dishes;
  const reduction = 1 - (talentTimeReduction[talentLevel] || 0);
  let bestCombo = null;

  for (let g = Math.floor(totalExpNeeded / dish1.exp); g >= 0; g--) {
    let rem1 = totalExpNeeded - g * dish1.exp;
    for (let f = Math.floor(rem1 / dish2.exp); f >= 0; f--) {
      let rem2 = rem1 - f * dish2.exp;
      if (rem2 % dish3.exp === 0) {
        let w = rem2 / dish3.exp;
        bestCombo = { g, f, w };
        break;
      }
    }
    if (bestCombo) break;
  }

  if (!bestCombo) {
    resultDiv.textContent = "No efficient combination found.";
    return;
  }

  const totalCookTime =
    bestCombo.g * dish1.cookTimeHr * reduction +
    bestCombo.f * dish2.cookTimeHr * reduction +
    bestCombo.w * dish3.cookTimeHr * reduction;
  const realTime = totalCookTime / (delegatoLevel + 1);
  const days = Math.floor(realTime / 24);
  const hours = Math.round(realTime % 24);

  resultDiv.textContent =
    `EXP needed: ${totalExpNeeded}\n\n` +
    `Optimized Plan:\n  ${bestCombo.g} × ${dish1.name}\n  ${bestCombo.f} × ${dish2.name}\n  ${bestCombo.w} × ${dish3.name}\n\n` +
    `Total time required: ${days} day(s) and ${hours} hour(s)`;
}

function calculateTime() {
  const recipeIndex = parseInt(document.getElementById('recipeSelect').value);
  const dishCount = parseInt(document.getElementById('dishAmount').value);
  const flameLevel = parseInt(document.getElementById('timeTalentLevel').value);
  const delegato = parseInt(document.getElementById('timeDelegatoLevel').value);
  const reduction = 1 - talentTimeReduction[flameLevel];

  const totalCookTime = dishes[recipeIndex].cookTimeHr * dishCount * reduction;
  const parallel = delegato + 1;
  const realTime = totalCookTime / parallel;
  const days = Math.floor(realTime / 24);
  const hours = Math.round(realTime % 24);

  document.getElementById('timeResult').textContent =
    `Total time required: ${days} day(s) and ${hours} hour(s)`;
}
</script>
</body>
</html>

